@using Common.CommonData
@using WebApps.ExtensionObject
@using WebApps.CommonFunction
@using WebApps.CommonFunction;
@{
    Layout = null;

    string _LanguageCode = AppsCommon.GetCurrentLang();
}

<!DOCTYPE html>
<html>
<head>
    <script>
    var _currentlanguage = '@_LanguageCode';
    </script>
    @* https://css-tricks.com/probably-use-initial-scale1/ *@
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <meta name="__RequestVerificationToken" content="@Html.AntiForgeryTokenValue()" />
    <title>@ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <script src=@($"/Scripts/jquery-1.10.2.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/jquery-ui-1.10.2.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/jquery.unobtrusive-ajax.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <link href=@($"/Scripts/outSourcesLib/notify/animate.min.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Scripts/outSourcesLib/notify/notify.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Scripts/outSourcesLib/SweetAlert/sweetalert2.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Scripts/outSourcesLib/multipleSelect/multiple-select.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Scripts/outSourcesLib/DragTable/jquery.dataTables.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Scripts/outSourcesLib/DragTable/dataTables.fixedColumns.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Content/font.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Content/Site.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Content/IconNVS/IconNVS.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Content/fonts/glyphicons/glyphicons.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Content/fonts/fontawesome/fontawesome-all.min.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Scripts/outSourcesLib/datetimepickerMaster/jquery.datetimepicker.min.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <link href=@($"/Content/LegalhomeStyleSheet.css?v={CommonVariables.AssemblyVersion}") rel="stylesheet" />
    <script src="@Url.Script("~/Scripts/DangTQForm.js")"></script>
    <script src="~/Scripts/messagebox/JsFormPopup.js"></script>
    <script src="~/Scripts/messagebox/popup.js"></script>
    <link href="~/Content/CssFormPoup/StyleFormPopup.css" rel="stylesheet" />
    <script src="~/Content/ComboCheckList/jquery.multiple.select_new.js"></script>
    <link href="~/Content/ComboCheckList/multiple-select.css" rel="stylesheet" />
    @* Loader *@
    <link href="~/Content/CSSWaitingIcon/rolling.css" rel="stylesheet" />
    <link href="~/Scripts/AlertPopup/NVSAlertCss.css" rel="stylesheet" />
    <script src="~/Scripts/AlertPopup/ASSAlert.js"></script>

</head>
<body>

    <div class="hidden">
        @Html.Partial("~/ViewsShared/nvs.variables.js.cshtml")
    </div>
    <div class="container-wrapper">
        <div class="grid-container_head" style="height:85px;width:99%">
            <div class="main-menu grid-item" style="border-right:none">
                <div class="logo_contain" style="width:100% !important">
                    <a href="\home">
                        <img src="~/Content/images/logo_ipath.png" alt="" style=" width: 57px;margin: 10px 60px;" />
                    </a>
                </div>
            </div>
            <div class="grid-item_head">
                <div class="Title-news-iPace">IPath</div>
            </div>
            <div class="grid-item_head">
                <div class="" style="width:100% !important;padding-top:10px;">
                    @if (_LanguageCode == LangCode.EN_US.ToString())
                    {
                        <a href="/Language?culture=vi-VN&returnUrl=Home" class="lang-vn"></a>
                    }
                    else
                    {
                        <a href="/Language?culture=en-GB&returnUrl=Home" class="lang-en"></a>
                    }
                </div>
                <div class="class-dangxuat">
                    <a href="/dang-xuat" style="padding-right: 12px; padding-top: 10px;">Đăng xuất</a>
                </div>
            </div>
        </div>
        <div class="" style="height: 8px;background-color: #dfdfdf;"></div>

        <div class="section-body">
            <div class="main-menu">
                <div id="divMns">
                    @Html.Partial("~/ViewsShared/_PartialMainMenu.cshtml")
                </div>
               
            </div>
            <div class="main-content">
                @RenderBody()
            </div>
        </div>
    </div>
    @* Footer *@
    <div class="section-bottom" >
        @Html.Partial("~/ViewsShared/_PartialFooter.cshtml")
    </div>
    @*End Footer*@

    <script src=@($"/Scripts/nvs.jquery.validate.data.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/nvs.jquery.util.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/nvs.jquery.alert.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/nvs.jquery.filter.search.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/common-data-loader.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/notify/bootstrap-notify.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/SweetAlert/es6-promise.auto.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/SweetAlert/sweetalert2.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/multipleSelect/jquery.multiple.select_new.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/DragTable/dragtables.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/DragTable/jquery.dataTables.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/DragTable/dataTables.fixedColumns.min.js?v={CommonVariables.AssemblyVersion}")></script>
    <script src=@($"/Scripts/outSourcesLib/datetimepickerMaster/jquery.datetimepicker.full.min.js?v={CommonVariables.AssemblyVersion}")></script>
</body>

</html>
<script>
    $(document).ready(function () {
        $('[data-menu="item-main-menu"]').on("click", function () {
            var ulSide = $(this).next();

            $(this).parent().siblings().removeClass('main-menu-active');
            $(this).parent().siblings().find('> ul').slideUp('fast').addClass('collapsed');
            if ($(ulSide).hasClass('collapsed')) {
                $(this).next().removeClass('collapsed').slideDown('fast');
                $(this).parent().addClass('main-menu-active');
            } else {
                $(this).parent().removeClass('main-menu-active');
                $(ulSide).addClass('collapsed').removeClass('main-menu-active').slideUp('fast');
            }
        });

        var currentPath = window.location.pathname;
        var currentTask = $('#divMns').find('[data-url="' + currentPath + '"]');
        $(currentTask).parent().removeClass('collapsed').slideDown('fast');
        $(currentTask).parent().parent().addClass('main-menu-active');
        $(currentTask).addClass('task-menu-active');
        // Hungtd: sửa đối với các menu có dung đường dẫn url nhưng khác tham số cuối(status) thì vẫn focus active
        currentPath = currentPath.substr(0, currentPath.length - 1);
        currentTask = $('#divMns').find('[data-link="' + currentPath + '"]');
        $(currentTask).parent().removeClass('collapsed').slideDown('fast');
        $(currentTask).parent().parent().addClass('main-menu-active');
        $(currentTask).addClass('task-menu-active');
    });

    function gotoTask(el) {
        var url = $(el).attr("data-url");
        window.location.href = url;
    }


</script>
